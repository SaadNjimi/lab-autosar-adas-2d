/************************************************************************************************************************************************************************\
 *** VEOS_MsgApi.c
 *** 
 *** Implementation of the VEOS Frame MessageApi.
 *** 
 *** File generated on 2022-02-16
 *** 
 *** Generated by VEOS Frame API generator
 *** 
 *** VEOS Frame build revision          : 5.4.0.1269
 *** VEOS Frame interaction ABI version : 5.4.0.0
 *** GeneratorVersion                   : 5.4.0.0
 *** GeneratorTimeStamp                 : 2022-02-16 10:07:28 (UTC)
 *** ABI MessageApi                     : 5.0.0.0
 *** 
 *** Copyright (c) 2022 by dSPACE GmbH, Paderborn, Germany.
 *** All Rights Reserved.
\************************************************************************************************************************************************************************/

#ifndef VEOS_MSGAPI_C
#define VEOS_MSGAPI_C

/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*\
  DEFINES (OPT)
\*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

/************************************************************************************************************************************************************************\
 *** Constant pre-processor defines for VEOS frame MessageApi
\************************************************************************************************************************************************************************/

#ifndef VEOS_MSGAPI_UNSETFUNCTIONPOINTER
/* The value if no pointer is set. */
#define VEOS_MSGAPI_UNSETFUNCTIONPOINTER 0
#endif

/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*\
  INCLUDES
\*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

#include "VEOS.h"
#include "VEOS_Private.h"
#include "VEOS_Callbacks.h"

#include "stdio.h"
#include "string.h"

#if defined(VEOS_GUARD_SOURCECODEONLY_OK)
#include "stdarg.h"
#endif


/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*\
  DEFINES
\*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

/* The API name. */
#ifdef VEOS_API_NAME
#undef VEOS_API_NAME
#endif
#define VEOS_API_NAME "MessageApi"

/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*\
  VARIABLE DEFINITIONS
\*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

/************************************************************************************************************************************************************************\
 *** Directly transferred global variables for VEOS frame MessageApi
\************************************************************************************************************************************************************************/
/* Pointer to the MsgApi instance. */
void * gp_VEOS_MsgApi_Instance;


/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*\
  FUNCTION DEFINITIONS
\*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

/************************************************************************************************************************************************************************\
 *** State management functions for the VEOS frame MessageApi
\************************************************************************************************************************************************************************/

/************************************************************************************************************************************************************************\
 *** FUNCTION:
 ***     VEOS_MsgApi_Start
 *** 
 *** DESCRIPTION:
 ***     Performs a start-up on the VEOS Frame MsgApi part.
 *** 
 *** PARAMETERS:
 ***     -/-
 *** 
 *** RETURNS:
 ***     VEOS_ApiSuccessType    If no error occurs, VEOS_E_OK will be returned. If any error occurs, an error code will be the result. See VEOS_Types.h for details.
\************************************************************************************************************************************************************************/
VEOS_ApiSuccessType VEOS_MsgApi_Start(void)
{
    VEOS_ApiSuccessType result = VEOS_E_OK;

    /* Check if API is correctly connected to the VpuHost */
    if (VEOS_MSGAPI_UNSETFUNCTIONPOINTER == gp_VEOS_MsgApi_ShowMessage)
    {
        result = VEOS_E_API_DISCONNECTED;
    }
    else
    if (VEOS_MSGAPI_UNSETFUNCTIONPOINTER == gp_VEOS_MsgApi_ShowMessageVarArgs)
    {
        result = VEOS_E_API_DISCONNECTED;
    }
    else
    #if defined(VEOS_DEBUG)
    if (VEOS_MSGAPI_UNSETFUNCTIONPOINTER == gp_VEOS_MsgApi_LogMessageVarArgs)
    {
        result = VEOS_E_API_DISCONNECTED;
    }
    else
    #endif
    result = VEOS_E_OK;

    /* Nothing more to do. */
    /* Track method result to debugging API */
    VEOS_FRM_DBG_METHOD_RESULT(VEOS_API_NAME, __FUNCTION__, result);

    return result;
}

/************************************************************************************************************************************************************************\
 *** Host function wrappers: Callbacks to simulator backplane
\************************************************************************************************************************************************************************/

/************************************************************************************************************************************************************************\
 *** FUNCTION:
 ***     VEOS_MsgApi_ShowMessage
 *** 
 *** DESCRIPTION:
 ***     Host function wrapper: Transfers the specified message to the simulator backplane where it processed further on.
 *** 
 *** PARAMETERS:
 ***     Type                            Name      Description
 ***     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***     const VEOS_MsgApi_SeverityType  Severity  Incoming argument: The severity of the message to submit.
 ***     const VEOS_boolean              Display   Incoming argument: If true, the message is displayed in the message browser, otherwise it is written to the dSPACE Log.
 ***     const VEOS_char *               pMessage  Incoming argument: The formatted message.
 *** 
 *** RETURNS:
 ***     VEOS_ApiSuccessType    If no error occurs, VEOS_E_OK will be returned. If any error occurs, an error code will be the result. See VEOS_Types.h for details.
\************************************************************************************************************************************************************************/
VEOS_ApiSuccessType VEOS_MsgApi_ShowMessage(
    const VEOS_MsgApi_SeverityType Severity,
    const VEOS_boolean Display,
    const VEOS_char * pMessage)
{
    /* Result of current host function */
    VEOS_ApiSuccessType callbackResult = VEOS_E_NO_RESULT;

    /* Track method start to debugging API */
    VEOS_FRM_DBG_METHOD_START(VEOS_API_NAME, __FUNCTION__);

    /* Save host function state. */
    VEOS_CALLBACK_UNHANDLED(VEOS_API_NAME, __FUNCTION__);

    /* Reset result of host function to make sure simulation backplane is the one to modify the result code. */
    callbackResult = VEOS_E_OK;

    /* Invoke host function and perform callback to simulator. */
    callbackResult = gp_VEOS_MsgApi_ShowMessage(gp_VEOS_MsgApi_Instance, Severity, Display, pMessage);

    /* Check result of host function. */
    VEOS_CHECK_LOCAL_CALLBACK_RESULT(callbackResult);

    /* Track method end to debugging API */
    VEOS_FRM_DBG_METHOD_END(VEOS_API_NAME, __FUNCTION__);

    /* Save host function state. */
    VEOS_CALLBACK_HANDLED(VEOS_API_NAME, __FUNCTION__, callbackResult);

    /* Track method result to debugging API */
    VEOS_FRM_DBG_METHOD_RESULT(VEOS_API_NAME, __FUNCTION__, callbackResult);

    /* Return result to caller. */
    return callbackResult;
}

/************************************************************************************************************************************************************************\
 *** FUNCTION:
 ***     VEOS_MsgApi_ShowMessageVarArgs
 *** 
 *** DESCRIPTION:
 ***     Host function wrapper: Transfers the specified message to the simulator backplane where it processed further on.
 *** 
 *** PARAMETERS:
 ***     Type                            Name      Description
 ***     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***     const VEOS_MsgApi_SeverityType  Severity  Incoming argument: The severity of the message to submit.
 ***     const VEOS_boolean              Display   Incoming argument: If true, the message is displayed in the message browser, otherwise it is written to the dSPACE Log.
 ***     const VEOS_char *               pFormat   Incoming argument: The formatted message.
 ***     va_list                         pArgs     Incoming argument: Reference to the formatting arguments.
 *** 
 *** RETURNS:
 ***     VEOS_ApiSuccessType    If no error occurs, VEOS_E_OK will be returned. If any error occurs, an error code will be the result. See VEOS_Types.h for details.
\************************************************************************************************************************************************************************/
VEOS_ApiSuccessType VEOS_MsgApi_ShowMessageVarArgs(
    const VEOS_MsgApi_SeverityType Severity,
    const VEOS_boolean Display,
    const VEOS_char * pFormat,
    va_list pArgs)
{
    /* Result of current host function */
    VEOS_ApiSuccessType callbackResult = VEOS_E_NO_RESULT;

    /* Track method start to debugging API */
    VEOS_FRM_DBG_METHOD_START(VEOS_API_NAME, __FUNCTION__);

    /* Save host function state. */
    VEOS_CALLBACK_UNHANDLED(VEOS_API_NAME, __FUNCTION__);

    /* Reset result of host function to make sure simulation backplane is the one to modify the result code. */
    callbackResult = VEOS_E_OK;

    /* Invoke host function and perform callback to simulator. */
    callbackResult = gp_VEOS_MsgApi_ShowMessageVarArgs(gp_VEOS_MsgApi_Instance, Severity, Display, pFormat, pArgs);

    /* Check result of host function. */
    VEOS_CHECK_LOCAL_CALLBACK_RESULT(callbackResult);

    /* Track method end to debugging API */
    VEOS_FRM_DBG_METHOD_END(VEOS_API_NAME, __FUNCTION__);

    /* Save host function state. */
    VEOS_CALLBACK_HANDLED(VEOS_API_NAME, __FUNCTION__, callbackResult);

    /* Track method result to debugging API */
    VEOS_FRM_DBG_METHOD_RESULT(VEOS_API_NAME, __FUNCTION__, callbackResult);

    /* Return result to caller. */
    return callbackResult;
}

/************************************************************************************************************************************************************************\
 *** FUNCTION:
 ***     VEOS_MsgApi_LogMessageVarArgs
 *** 
 *** DESCRIPTION:
 ***     Host function wrapper: Transfers the specified message to the simulator backplane where it is written to the simulation log.
 *** 
 *** PARAMETERS:
 ***     Type               Name              Description
 ***     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***     const VEOS_char *  pModuleStr        Incoming argument: The name of the sending module.
 ***     const VEOS_char *  pFunctionNameStr  Incoming argument: The function within the module reporting the error.
 ***     const VEOS_char *  pFormat           Incoming argument: The formatted message.
 ***     va_list            pArgs             Incoming argument: Reference to the formatting arguments.
 *** 
 *** RETURNS:
 ***     VEOS_ApiSuccessType    If no error occurs, VEOS_E_OK will be returned. If any error occurs, an error code will be the result. See VEOS_Types.h for details.
\************************************************************************************************************************************************************************/
#if defined(VEOS_DEBUG)
VEOS_ApiSuccessType VEOS_MsgApi_LogMessageVarArgs(
    const VEOS_char * pModuleStr,
    const VEOS_char * pFunctionNameStr,
    const VEOS_char * pFormat,
    va_list pArgs)
{
    /* Result of current host function */
    VEOS_ApiSuccessType callbackResult = VEOS_E_NO_RESULT;

    /* Save host function state. */
    VEOS_CALLBACK_UNHANDLED(VEOS_API_NAME, __FUNCTION__);

    /* Reset result of host function to make sure simulation backplane is the one to modify the result code. */
    callbackResult = VEOS_E_OK;

    /* Invoke host function and perform callback to simulator. */
    callbackResult = gp_VEOS_MsgApi_LogMessageVarArgs(gp_VEOS_MsgApi_Instance, pModuleStr, pFunctionNameStr, pFormat, pArgs);

    /* Check result of host function. */
    VEOS_CHECK_LOCAL_CALLBACK_RESULT(callbackResult);

    /* Save host function state. */
    VEOS_CALLBACK_HANDLED(VEOS_API_NAME, __FUNCTION__, callbackResult);

    /* Return result to caller. */
    return callbackResult;
}
#endif

/************************************************************************************************************************************************************************\
 *** API functions: Functions to provide to other modules
\************************************************************************************************************************************************************************/

/************************************************************************************************************************************************************************\
 *** FUNCTION:
 ***     VEOS_MsgApi_ShowMessageFormat
 *** 
 *** DESCRIPTION:
 ***     API function: Transfers the specified message to the simulator backplane where it processed further on.
 *** 
 *** PARAMETERS:
 ***     Type                            Name      Description
 ***     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***     const VEOS_MsgApi_SeverityType  Severity  Incoming argument: The severity of the message to submit.
 ***     const VEOS_boolean              Display   Incoming argument: If true, the message is displayed in the message browser, otherwise it is written to the dSPACE Log.
 ***     const VEOS_char *               pFormat   Incoming argument: The formatted message.
 *** 
 *** RETURNS:
 ***     VEOS_ApiSuccessType    If no error occurs, VEOS_E_OK will be returned. If any error occurs, an error code will be the result. See VEOS_Types.h for details.
\************************************************************************************************************************************************************************/
VEOS_ApiSuccessType VEOS_MsgApi_ShowMessageFormat(
    const VEOS_MsgApi_SeverityType Severity,
    const VEOS_boolean Display,
    const VEOS_char * pFormat,
    ...)
{
    /* Pointer to list of additional arguments. */
    va_list pArgs;

    /* Local result of API function */
    VEOS_ApiSuccessType success = VEOS_E_PENDING;

    /* Get pointer to arguments. */
    va_start(pArgs, pFormat);

    /* Start of custom implementation from configuration file. */
    success = VEOS_MsgApi_ShowMessageVarArgs(Severity, Display, pFormat, pArgs);
    /* End of custom implementation from configuration file. */

    /* Reset pointer to list of additional arguments. */
    va_end(pArgs);

    /* Return result to caller. */
    return success;
}

/************************************************************************************************************************************************************************\
 *** FUNCTION:
 ***     VEOS_MsgApi_LogMessage
 *** 
 *** DESCRIPTION:
 ***     API function: Transfers the specified message to the simulator backplane where it is written to the simulation log.
 *** 
 *** PARAMETERS:
 ***     Type               Name              Description
 ***     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***     const VEOS_char *  pModuleStr        Incoming argument: The name of the sending module.
 ***     const VEOS_char *  pFunctionNameStr  Incoming argument: The function within the module reporting the error.
 ***     const VEOS_char *  pFormat           Incoming argument: The formatted message.
 *** 
 *** RETURNS:
 ***     VEOS_ApiSuccessType    If no error occurs, VEOS_E_OK will be returned. If any error occurs, an error code will be the result. See VEOS_Types.h for details.
\************************************************************************************************************************************************************************/
#if defined(VEOS_DEBUG)
VEOS_ApiSuccessType VEOS_MsgApi_LogMessage(
    const VEOS_char * pModuleStr,
    const VEOS_char * pFunctionNameStr,
    const VEOS_char * pFormat,
    ...)
{
    /* Pointer to list of additional arguments. */
    va_list pArgs;

    /* Local result of API function */
    VEOS_ApiSuccessType success = VEOS_E_PENDING;

    /* Get pointer to arguments. */
    va_start(pArgs, pFormat);

    /* Start of custom implementation from configuration file. */
    success = VEOS_MsgApi_LogMessageVarArgs(pModuleStr, pFunctionNameStr, pFormat, pArgs);
    /* End of custom implementation from configuration file. */

    /* Reset pointer to list of additional arguments. */
    va_end(pArgs);

    /* Return result to caller. */
    return success;
}
#endif


#endif /* VEOS_MSGAPI_C */
/*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*\
  END OF FILE
\*----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
